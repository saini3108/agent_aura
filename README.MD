# ğŸ§  `aura_agent`: Agentic AI Layer for AURA Risk Platform

`aura_agent` is the GenAI/agentic orchestration server for **AURA**, an enterprise-grade platform for Credit Risk, IFRS 9, Basel, ECL, RWA, and regulatory compliance.

This repo powers intelligent, modular, explainable **agentic workflows** â€” combining LangGraph + FastAPI + MCP + RAG â€” for model validation, monitoring, and future risk automation modules.

---

## ğŸ¯ Vision: Human-AI Collaboration for Risk Intelligence

Traditional financial risk systems are rule-based, brittle, and isolated. `aura_agent` enhances them with:

âœ… Intelligent agents that assist and explain
âœ… Human-in-the-loop (HITL) at every decision point
âœ… Document-aware RAG agents
âœ… Modular design with clean audit trails
âœ… Open-source, composable architecture
âœ… Enterprise-ready observability + security

> **Goal**: AURA is a modular, future-proof credit risk and regulatory platform.
> This repo adds explainable, human-in-the-loop **agentic AI** for model validation, monitoring, and document-aware decision support â€” with auditability and governance built-in.

---

## ğŸ§± Design Principles

- **Modular-first** â€“ Each business module (Validation, Monitoring, ECL, etc.) is independent and reusable.
- **Explainable-first** â€“ All agent actions are logged, traced, and reviewable.
- **Agentic only where useful** â€“ We only add GenAI where it enhances decision-making.
- **Composable** â€“ Shared logic lives in `core/`; modules remain clean and testable.
- **Governed by HITL** â€“ Every flow supports human review, override, and feedback.
- **Non-vendor lock-in** â€“ All components are open-source and portable.

## âœ… Core Principles for Enterprise-Ready Codebase
| Principle           | Implementation                                                          |
| ------------------- | ----------------------------------------------------------------------- |
| **Modularity**      | Strict separation via `core/`, `modules/`, `tools/`, `agents/`, etc.    |
| **Security**        | `.env` for secrets, CORS policies, no hardcoded creds, RBAC integration |
| **Observability**   | LangGraph tracing, audit trail hooks, logging pipeline                  |
| **Testability**     | Unit + integration tests (`pytest` from day one)                        |
| **Extensibility**   | Plug-and-play modules and flows                                         |
| **HITL Governance** | All flows pausable/injectable via API hooks                             |
| **Config-driven**   | YAML/JSON configs to drive module load/dispatch                         |


---

## ğŸ§© AURA Ecosystem Overview

| Component        | Repo           | Description                                      |
|------------------|----------------|--------------------------------------------------|
| ğŸ§  `aura_agent`   | âœ… This repo    | GenAI agents, LangGraph workflows, RAG           |
| ğŸ›  `aura_backend` | `Django`       | Auth, user data, model configs, records          |
| ğŸ“Š `aura_frontend`| `Next.js`      | UI: Dashboards, agent chat, HITL approval views  |

---

## âš™ï¸ Tech Stack

| Layer                | Tool                        |
|----------------------|-----------------------------|
| Agent Orchestration  | [LangGraph](https://www.langgraph.dev) |
| Packaging/Modularity | [MCP](https://github.com/langchain-ai/langchain/tree/master/libs/langchain-core#multi-component-packages) |
| API + Tools Layer    | FastAPI + Pydantic          |
| Memory / State       | Redis or PostgreSQL         |
| RAG + Docs Search    | LlamaIndex + Qdrant/Chroma  |
| Observability        | LangGraph trace + audit DB  |
| RBAC/Auth            | Via Django backend          |
| Report Generation    | Markdown â†’ HTML â†’ PDF       |

---

## ğŸ“‚ Folder Structure

```bash
aura_agent/
â”‚
â”œâ”€â”€ agent_service/                  # Main application code
â”‚   â”œâ”€â”€ core/                       # Core shared logic, reusable across modules
â”‚   â”‚   â”œâ”€â”€ agents/                 # Base and common agents (e.g. HumanAgent)
â”‚   â”‚   â”œâ”€â”€ tools/                  # Tool interfaces (e.g. AUC, PSI, drift)
â”‚   â”‚   â”œâ”€â”€ flows/                  # Shared LangGraph components/utilities
â”‚   â”‚   â”œâ”€â”€ memory/                 # State management (Redis, PostgreSQL, etc.)
â”‚   â”‚   â”œâ”€â”€ schema/                 # Pydantic models for inputs/outputs
â”‚   â”‚   â””â”€â”€ config.py               # App-level config (env, logging)
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                    # Modular, plug-and-play domain flows
â”‚   â”‚   â”œâ”€â”€ model_validation/       # Model validation flows, agents, tools
â”‚   â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”‚   â”œâ”€â”€ flows/
â”‚   â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ model_monitoring/       # Monitoring workflows (drift, stability)
â”‚   â”‚   â”œâ”€â”€ ecl_engine/             # Placeholder for future ECL module
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â””â”€â”€ main.py                     # FastAPI app entrypoint (serves flows)
â”‚
â”œâ”€â”€ scripts/                        # CLI utilities (e.g. test run flows, ingestion)
â”‚   â””â”€â”€ run_validation_flow.py
â”‚
â”œâ”€â”€ tests/                          # Unit and integration tests
â”‚   â”œâ”€â”€ unit/                       # Tests for tools, agents
â”‚   â””â”€â”€ flows/                      # Tests for end-to-end LangGraph flows
â”‚
â”œâ”€â”€ docs/                           # Documentation folder (in Markdown)
â”‚   â”œâ”€â”€ architecture.md
â”‚   â”œâ”€â”€ agent-design.md
â”‚   â”œâ”€â”€ module-guide.md
â”‚   â”œâ”€â”€ hitl.md
â”‚   â””â”€â”€ reporting.md
â”‚
â”œâ”€â”€ .env                            # Environment variables
â”œâ”€â”€ requirements.txt / pyproject.toml
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md

````

---

## ğŸ§  Agents Overview

| Agent                | Role                                      |
| -------------------- | ----------------------------------------- |
| `AnalystAgent`       | Parses model and metadata                 |
| `ValidatorAgent`     | Runs metrics (AUC, KS, PSI, SHAP, etc.)   |
| `DocumentationAgent` | Verifies documentation via RAG            |
| `ReviewerAgent`      | Highlights issues and generates feedback  |
| `AuditorAgent`       | Final step: signs off or escalates        |
| `HumanAgent`         | Injected during pause for review/feedback |

All agents are composable and extendable per module.

---

## ğŸ” Example Validation Flow

```text
[AnalystAgent]
     â†“
[ValidatorAgent]
     â†“
[DocumentationAgent]
     â†“
[Pause for Human Review]
     â†“
[ReviewerAgent]
     â†“
[AuditorAgent]
     â†“
[ReportGenerator] (future)
```

---

## ğŸ§ª Testing Philosophy

```text
tests/
â”œâ”€â”€ unit/               # Tool and agent logic
â”‚   â””â”€â”€ test_auc_tool.py
â”œâ”€â”€ flows/              # Integration-level flow tests
â”‚   â””â”€â”€ test_validation_flow.py
```

---

## ğŸš€ Quickstart (Dev Setup)

```bash
# Clone and setup
git clone https://github.com/your-org/aura_agent.git
cd aura_agent
python -m venv .venv && source .venv/bin/activate

# Install dependencies
poetry install  # or: pip install -r requirements.txt

# Start dev server
uvicorn agent_service.main:app --reload
```

---

## ğŸ§ª Run Example Flow

```bash
# View example LangGraph flow:
agent_service/modules/model_validation/flows/sample_validation_flow.py

# Launch via FastAPI:
POST /run-flow?module=model_validation

# Or via CLI script:
python scripts/run_validation_flow.py
```

---

## ğŸ§­ Development Roadmap

### âœ… Phase 1: Bootstrap

* [x] LangGraph + FastAPI setup
* [x] Modular structure with `core/` and `modules/`
* [x] Add metrics tools: AUC, SHAP, KS
* [x] Redis/Postgres memory

### ğŸ”„ Phase 2: Human-in-the-Loop (HITL)

* [ ] Pause/resume LangGraph workflows
* [ ] UI feedback endpoint
* [ ] LangGraph â†” UI bridge for HITL inserts
* [ ] Store user override decisions

### ğŸ“š Phase 3: RAG + Document Agent

* [ ] Ingest PDFs, Excels with LlamaIndex
* [ ] Embed and index documents
* [ ] Create DocumentationAgent with compliance Q\&A

### ğŸ§© Phase 4: Expand Modules

* [ ] Full `model_monitoring` flow
* [ ] ECL agent stubs (stage classification, PD/LGD)
* [ ] Configurable module loader (YAML/JSON)
* [ ] Generalize tools in `core/`

### ğŸ” Phase 5: Audit & Governance

* [ ] RBAC integration with Django sessions
* [ ] Store LangGraph trace in audit DB
* [ ] Per-client audit logs

### ğŸ“„ Phase 6: Reporting & Packaging

* [ ] Markdown â†’ HTML â†’ PDF reporting agent
* [ ] Add Docker + `.env` support
* [ ] CLI tools for dev/ops validation

---

## ğŸ“„ Docs Structure (Coming Soon)

```bash
docs/
â”œâ”€â”€ architecture.md        # System diagrams, flowcharts
â”œâ”€â”€ module-guide.md        # Create new modules (e.g., RWA, ECL)
â”œâ”€â”€ agent-design.md        # How to create a new agent or tool
â”œâ”€â”€ hitl.md                # HITL lifecycle and API hooks
â”œâ”€â”€ reporting.md           # Report pipeline and structure
```

## ğŸ“„ Hereâ€™s a short guide based on purpose:
```bash
| Purpose                    | Folder                                  | Example File Name                        |
| -------------------------- | --------------------------------------- | ---------------------------------------- |
| Shared core logic          | `agent_service/core/`                   | `agents/validator_agent.py`              |
| LangGraph flows per module | `agent_service/modules/<module>/flows/` | `sample_validation_flow.py`              |
| Tools (AUC, SHAP, etc.)    | `agent_service/core/tools/`             | `metrics_tools.py`, `doc_checker.py`     |
| Agent classes              | `agent_service/core/agents/`            | `validator_agent.py`, `auditor_agent.py` |
| Memory config/loaders      | `agent_service/core/memory/`            | `redis_memory.py`, `pg_state.py`         |
| Data schemas               | `agent_service/core/schema/`            | `input_schema.py`, `result_schema.py`    |
| Module-specific logic      | `agent_service/modules/<module>/`       | `tools.py`, `agents.py`, `flows.py`      |
| CLI/testing/debug scripts  | `scripts/`                              | `run_validation_flow.py`                 |
| Tests                      | `tests/`                                | `test_auc_tool.py`, `test_flow.py`       |

```
